(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71afd992"],{"075c":function(t,e,a){"use strict";var n=a("a9b5"),s=a.n(n);s.a},"1f33":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-layout",[a("a-layout-content",{style:{width:t.width,margin:"auto",marginTop:"1rem",marginBottom:"1rem",zIndex:999}},[a("div",{style:{background:"#fff",padding:"24px",minHeight:t.height}},[t._t("content",[t._v("Content")])],2)])],1)},s=[],i={name:"Content",props:{height:{default:"480px"},width:{default:"90%"}}},o=i,r=(a("075c"),a("2877")),c=Object(r["a"])(o,n,s,!1,null,"64841f71",null);e["a"]=c.exports},3414:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Header",{attrs:{"select-keys":t.selectKeys}}),a("Content",{attrs:{height:"100px",width:"80%"},scopedSlots:t._u([{key:"content",fn:function(){return[a("a-back-top"),a("a-skeleton",{attrs:{active:"",loading:t.infoLoading}},[a("a-row",[a("a-col",{attrs:{span:24}},[a("a-tag",[t._v(t._s(t.data.type))])],1)],1),a("a-row",[a("a-col",{attrs:{span:24}},[a("h3",{style:{marginTop:"20px"}},[t._v(t._s(t.data.title))])])],1),a("a-row",[a("a-col",{style:{margin:"10px"},attrs:{span:24}},[t._v(" "+t._s(t.data.content)+" ")])],1)],1),a("a-row",{style:{marginTop:"10px"}},[a("a-button",{on:{click:function(e){return t.show_edit(t.id)}}},[a("a-icon",{attrs:{type:"edit"}}),t._v("写回答 ")],1)],1),t.visible?a("div",{style:{marginTop:"10px"}},[a("a-form",[a("a-form-item",[a("a-textarea",{style:{minHeight:"150px"},attrs:{placeholder:"写回答..."},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),a("a-form-item",{style:{float:"right"}},[a("a-button",{style:{marginRight:"10px"},attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")]),a("a-button",{attrs:{type:"danger"},on:{click:t.cancel}},[t._v("取消")])],1),a("a-row",{style:{zIndex:-1,marginBottom:0,height:"40px"}},[a("a-col",{attrs:{span:24}})],1)],1)],1):t._e()]},proxy:!0}])}),a("Content",{attrs:{width:"80%"},scopedSlots:t._u([{key:"content",fn:function(){return[a("div",[a("a-row",[a("a-col",{attrs:{span:20}},[a("a-list",{attrs:{"item-layout":"vertical",size:"large",pagination:t.pagination,"data-source":t.listData,locale:{emptyText:"暂无回答"},loading:t.loading},scopedSlots:t._u([{key:"renderItem",fn:function(e,n){return a("a-list-item",{key:"item.title"},[a("a-list-item-meta",{attrs:{description:e.description}},[a("a",{attrs:{slot:"title",href:e.href},slot:"title"},[t._v(t._s(e.username))]),a("a-avatar",{attrs:{slot:"avatar",src:"/api/user/avatar/get_by_username?username="+e.username},slot:"avatar"})],1),t._v(" "+t._s(e.reply)+" "),a("a-row",{style:{margin:"10px 0 10px 0"}},[a("a-col",{attrs:{span:4}},[a("a",{attrs:{href:"javascript:;"}},[a("span",{on:{click:function(a){return t.star(e.id)}}},[a("a-icon",{staticStyle:{"margin-right":"8px"},attrs:{type:"star"}}),t._v(t._s(e.star)+" ")],1)])]),a("a-col",{attrs:{span:4}},[a("a-tooltip",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" 点我可展开或者折叠评论 ")]},proxy:!0}],null,!0)},[a("a",{attrs:{href:"javascript:;"}},[a("span",{on:{click:function(e){return t.show(n)}}},[a("a-icon",{staticStyle:{"margin-right":"8px"},attrs:{type:"message"}}),t._v(t._s(e.comments)+" ")],1)])])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.show_comments[n],expression:"show_comments[index]"}]},[a("a-list",{attrs:{pagination:t.pagination_2,locale:{emptyText:"快来写评论吧"}}}),a("a-row",[a("a-col",{attrs:{span:16}},[a("a-input",{attrs:{placeholder:"写下你的评论..."}})],1),a("a-col",{attrs:{span:6,offset:"1"}},[a("a-button",{attrs:{type:"primary"}},[t._v("评论")])],1)],1)],1)],1)}}])},[a("div",{attrs:{slot:"header"},slot:"header"},[a("b",[t._v(t._s(t.listData.length))]),t._v(" 个回答 ")])])],1)],1)],1)]},proxy:!0}])}),a("Footer")],1)},s=[],i=(a("d81d"),a("d3b7"),a("498a"),a("cff1")),o=a("1f33"),r=a("cdaa"),c=a("4328"),l=a.n(c),u={name:"ArticleDetail",components:{Header:i["a"],Content:o["a"],Footer:r["a"]},data:function(){return{selectKeys:[],id:void 0,visible:!1,content:"",data:[],pagination:{pageSize:10},pagination_2:{size:"small",pageSize:8,onChange:function(t){console.log(t)}},listData:[],loading:!0,infoLoading:!0,show_comments:[],comments_data:[]}},mounted:function(){var t=this;this.id=this.$route.params.id,this.set_article().then((function(){t.infoLoading=!1,t.set_reply().then((function(){t.loading=!1}))}))},methods:{set_reply:function(){var t=this;return new Promise((function(e,a){t.$axios.post("/api/community/get_reply",l.a.stringify({id:t.id})).then((function(a){t.listData=a.data,t.show_comments=a.data.map((function(){return!1})),e(a.data)})).catch((function(e){e.response.status&&t.$message.error("服务器异常"),a(e)}))}))},set_article:function(){var t=this;return new Promise((function(e,a){t.$axios.post("/api/community/get_article",l.a.stringify({id:t.id})).then((function(a){t.data=a.data,e()})).catch((function(e){500===e.response.status&&t.$message.error("服务器异常"),a(e)}))}))},show_edit:function(t){sessionStorage.getItem("isLogin")?(this.visible=!0,console.log(t)):(this.$message.error("请先进行登录"),this.$children[0].login())},submit:function(){var t=this;""===this.content.trim()?this.$message.info("内容为空"):this.$axios.post("/api/community/reply",l.a.stringify({id:this.id,reply:this.content})).then((function(e){200===e.data.status?(t.set_reply(),t.$message.success(e.data.message),t.visible=!1):t.$message.error(e.data.message)})).catch((function(e){console.log(e),500===e.response.status&&t.$message.error("服务器异常")}))},cancel:function(){this.visible=!1},star:function(t){console.log("star",t)},show:function(t){this.$set(this.show_comments,t,!this.show_comments[t]),console.log(this.show_comments)}}},p=u,m=a("2877"),d=Object(m["a"])(p,n,s,!1,null,null,null);e["default"]=d.exports},"498a":function(t,e,a){"use strict";var n=a("23e7"),s=a("58a8").trim,i=a("c8d2");n({target:"String",proto:!0,forced:i("trim")},{trim:function(){return s(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var n=a("1d80"),s=a("5899"),i="["+s+"]",o=RegExp("^"+i+i+"*"),r=RegExp(i+i+"*$"),c=function(t){return function(e){var a=String(n(e));return 1&t&&(a=a.replace(o,"")),2&t&&(a=a.replace(r,"")),a}};t.exports={start:c(1),end:c(2),trim:c(3)}},a9b5:function(t,e,a){},c8d2:function(t,e,a){var n=a("d039"),s=a("5899"),i="​᠎";t.exports=function(t){return n((function(){return!!s[t]()||i[t]()!=i||s[t].name!==t}))}},d81d:function(t,e,a){"use strict";var n=a("23e7"),s=a("b727").map,i=a("1dde"),o=a("ae40"),r=i("map"),c=o("map");n({target:"Array",proto:!0,forced:!r||!c},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
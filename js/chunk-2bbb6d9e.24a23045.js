(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2bbb6d9e"],{5334:function(e,a,r){"use strict";r.r(a);var t=function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("div",[r("Header"),r("a-layout",[r("a-layout-content",{style:{background:"#fff",padding:"24px",minHeight:"680px",width:"90%",margin:"auto",marginTop:"1rem",marginBottom:"1rem"}},[r("a-row",{style:{marginTop:"30px"}}),r("a-row",[r("a-col",{attrs:{xs:{span:20,offset:2},sm:{span:20,offset:1},md:{span:18,offset:2},lg:{span:16,offset:2},xl:{span:10,offset:5}}},[r("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[r("a-form-item",e._b({},"a-form-item",e.formItemLayout,!1),[r("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 用户名 ")]),r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:"请输入你的用户名!",whitespace:!0}]}],expression:"[\n                  'username',\n                  {\n                    rules: [\n                      {\n                        required: true,\n                        message: '请输入你的用户名!',\n                        whitespace: true,\n                      },\n                    ],\n                  },\n                ]"}]})],1),r("a-form-item",e._b({attrs:{label:"邮箱地址"}},"a-form-item",e.formItemLayout,!1),[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email",{rules:[{type:"email",message:"邮箱格式不合法!"},{required:!0,message:"请输入你的邮箱!"}]}],expression:"[\n                  'email',\n                  {\n                    rules: [\n                      {\n                        type: 'email',\n                        message: '邮箱格式不合法!',\n                      },\n                      {\n                        required: true,\n                        message: '请输入你的邮箱!',\n                      },\n                    ],\n                  },\n                ]"}]})],1),r("a-form-item",e._b({attrs:{label:"密码","has-feedback":""}},"a-form-item",e.formItemLayout,!1),[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"密码长度不能小于6!",min:6},{validator:e.validateToNextPassword}]}],expression:"[\n                  'password',\n                  {\n                    rules: [\n                      {\n                        required: true,\n                        message: '密码长度不能小于6!',\n                        min: 6,\n                      },\n                      {\n                        validator: validateToNextPassword,\n                      },\n                    ],\n                  },\n                ]"}],attrs:{type:"password"}})],1),r("a-form-item",e._b({attrs:{label:"确认密码","has-feedback":""}},"a-form-item",e.formItemLayout,!1),[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["confirm",{rules:[{required:!0,message:"请确认你的密码"},{validator:e.compareToFirstPassword}]}],expression:"[\n                  'confirm',\n                  {\n                    rules: [\n                      {\n                        required: true,\n                        message: '请确认你的密码',\n                      },\n                      {\n                        validator: compareToFirstPassword,\n                      },\n                    ],\n                  },\n                ]"}],attrs:{type:"password"},on:{blur:e.handleConfirmBlur}})],1),r("a-form-item",e._b({attrs:{label:"性别"}},"a-form-item",e.formItemLayout,!1),[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["gender",{rules:[{required:!0,message:"请输入选择你的性别!"}]}],expression:"[\n                  'gender',\n                  {\n                    rules: [\n                      { required: true, message: '请输入选择你的性别!' },\n                    ],\n                  },\n                ]"}],attrs:{placeholder:"Select your gender"}},[r("a-select-option",{attrs:{value:"男"}},[e._v(" 男 ")]),r("a-select-option",{attrs:{value:"女"}},[e._v(" 女 ")]),r("a-select-option",{attrs:{value:"secret"}},[e._v(" 秘密 ")])],1)],1),r("a-form-item",e._b({attrs:{label:"学院"}},"a-form-item",e.formItemLayout,!1),[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["academy",{rules:[{required:!0,message:"请选择你的学院!"}]}],expression:"[\n                  'academy',\n                  { rules: [{ required: true, message: '请选择你的学院!' }] },\n                ]"}],attrs:{placeholder:"Select your academy"}},e._l(e.academies,(function(a){return r("a-select-option",{key:a,attrs:{value:a}},[e._v(" "+e._s(a)+" ")])})),1)],1),r("a-form-item",e._b({attrs:{label:"年级"}},"a-form-item",e.formItemLayout,!1),[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["grade",{rules:[{required:!0,message:"请选择你的年级!"}]}],expression:"[\n                  'grade',\n                  { rules: [{ required: true, message: '请选择你的年级!' }] },\n                ]"}],attrs:{placeholder:"Select your grade"}},e._l(e.grades,(function(a){return r("a-select-option",{key:a,attrs:{value:a}},[e._v(" "+e._s(a)+" ")])})),1)],1),r("a-form-item",e._b({},"a-form-item",e.tailFormItemLayout,!1),[r("a-button",{style:{float:"right"},attrs:{type:"primary","html-type":"submit"}},[e._v(" 注册 ")])],1)],1)],1)],1)],1)],1),r("Footer")],1)},s=[],o=(r("d81d"),r("d3b7"),r("cdaa")),n=r("cff1"),i=r("4328"),m=r.n(i),l={name:"SignUp",components:{Footer:o["a"],Header:n["a"]},data:function(){return{confirmDirty:!1,autoCompleteResult:[],formItemLayout:{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},tailFormItemLayout:{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},academies:["电院","安泰管理学院"],grades:["大一","大二","大三","大四","其他"]}},beforeCreate:function(){this.form=this.$form.createForm(this,{name:"register"})},mounted:function(){this.set_academy()},methods:{handleSubmit:function(e){var a=this;e.preventDefault(),this.form.validateFieldsAndScroll((function(e,r){e||(console.log("Received values of form: ",r),a.$axios.post("/api/user/signup/",m.a.stringify({username:r.username,email:r.email,password:r.password,gender:r.gender,academy:r.academy,grade:r.grade})).then((function(e){200===e.data.status?(a.$message.success(e.data.message),a.$router.push("/")):a.$message.error(e.data.message)})).catch((function(e){return console.log(e)})))}))},handleConfirmBlur:function(e){var a=e.target.value;this.confirmDirty=this.confirmDirty||!!a},compareToFirstPassword:function(e,a,r){var t=this.form;a&&a!==t.getFieldValue("password")?r("两次输入的密码不一致!"):r()},validateToNextPassword:function(e,a,r){var t=this.form;a&&this.confirmDirty&&t.validateFields(["confirm"],{force:!0}),r()},set_academy:function(){var e=this;return new Promise((function(a,r){e.$axios.get("/api/course/get_all_school").then((function(r){e.academies=r.data.map((function(e){return e.school})),a()})).catch((function(e){console.log(e),r()}))}))}}},u=l,d=r("2877"),c=Object(d["a"])(u,t,s,!1,null,null,null);a["default"]=c.exports},d81d:function(e,a,r){"use strict";var t=r("23e7"),s=r("b727").map,o=r("1dde"),n=r("ae40"),i=o("map"),m=n("map");t({target:"Array",proto:!0,forced:!i||!m},{map:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39b46448"],{abff:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-layout",[a("Header",{attrs:{"select-keys":[]}}),a("a-layout-content",{style:{width:"90%",margin:"auto",marginTop:"20px"}},[a("a-row",[a("a-col",{attrs:{span:5}},[a("Sidebar",{attrs:{selectedKeys:e.thisSelectedKeys,"open-keys":e.thisOpenKeys}})],1),a("a-col",{attrs:{span:18}},[a("a-layout-content",{style:{backgroundColor:"white",minHeight:"578px",marginLeft:"20px"}},[e._t("content",[e._v("Welcome come here")]),a("router-view")],2)],1)],1)],1),a("Footer")],1)],1)},o=[],n=a("cff1"),r=a("cdaa"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-row",[a("a-col",[a("a-menu",{staticStyle:{maxWidth:"256px"},attrs:{selectedKeys:e.selectedKeys,openKeys:e.keys,mode:"inline",inlineCollapsed:e.collapsed},on:{"update:openKeys":function(t){e.keys=t},"update:open-keys":function(t){e.keys=t}}},[a("a-sub-menu",{key:"sub1"},[a("span",{attrs:{slot:"title"},slot:"title"},[a("a-icon",{attrs:{type:"user"}}),a("span",[e._v("基本资料")])],1),a("a-menu-item",{key:"1"},[a("a",{attrs:{href:"/user/profile"}},[e._v("个人资料")])]),a("a-menu-item",{key:"2"},[a("a",{attrs:{href:"/user/profile/log"}},[e._v("登录日志")])])],1),a("a-sub-menu",{key:"sub2"},[a("span",{attrs:{slot:"title"},slot:"title"},[a("a-icon",{attrs:{type:"tool"}}),a("span",[e._v("帖子管理")])],1),a("a-menu-item",{key:"3"},[a("a",{attrs:{href:"/user/profile/article"}},[e._v("我的帖子")])]),a("a-menu-item",{key:"4"},[a("a",{attrs:{href:"/user/profile/post"}},[e._v("我要发帖")])])],1),a("a-sub-menu",{key:"sub3"},[a("span",{attrs:{slot:"title"},slot:"title"},[a("a-icon",{attrs:{type:"file"}}),a("span",[e._v("文件管理")])],1),a("a-menu-item",{key:"5"},[a("a",{attrs:{href:"/user/profile/files"}},[e._v("我的文件")])]),a("a-menu-item",{key:"6"},[a("a",{attrs:{href:"/user/profile/upload"}},[e._v("文件上传")])])],1),a("a-sub-menu",{key:"sub4"},[a("span",{attrs:{slot:"title"},slot:"title"},[a("a-icon",{attrs:{type:"setting"}}),a("span",[e._v("账号设置")])],1),a("a-menu-item",{key:"7"},[a("a",{attrs:{href:"/user/profile/change-password"}},[e._v("修改密码")])]),a("a-menu-item",{key:"8"},[a("a",{attrs:{href:"/user/profile/out"}},[e._v("注销账号")])])],1),a("a-sub-menu",{key:"sub5"},[a("span",{attrs:{slot:"title"},slot:"title"},[a("a-icon",{attrs:{type:"bell"}}),a("span",[e._v("消息通知")])],1),a("a-menu-item",{key:"9"},[a("a",{attrs:{href:"/user/profile/messages"}},[e._v("我的通知")])]),a("a-menu-item",{key:"10"},[a("a",{attrs:{href:"/user/profile/message-settings"}},[e._v("通知设置")])])],1)],1)],1)],1)],1)},i=[],c={name:"Sidebar",props:{openKeys:{default:function(){return["sub1"]}},selectedKeys:{default:function(){return["1"]}}},data:function(){return{current:["mail"],keys:this.openKeys,collapsed:!1,screenWidth:document.body.clientWidth}},methods:{toggleCollapsed:function(){this.collapsed=!this.collapsed}},watch:{openKeys:function(e){console.log("openKeys",e)}},mounted:function(){var e=this;window.onresize=function(){e.screenWidth=document.body.clientWidth,e.screenWidth<=734?e.collapsed=!0:e.collapsed=!1}}},u=c,f=a("2877"),p=Object(f["a"])(u,l,i,!1,null,null,null),d=p.exports,m={name:"Profile",props:{openKeys:{default:function(){return["sub1"]}},selectedKeys:{default:function(){return["1"]}}},components:{Header:n["a"],Footer:r["a"],Sidebar:d},data:function(){return{thisOpenKeys:this.openKeys,thisSelectedKeys:this.selectedKeys}}},v=m,y=Object(f["a"])(v,s,o,!1,null,"7cab1371",null);t["a"]=y.exports},f52e:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Profile",{attrs:{selectedKeys:e.thisSelectedKeys,"open-keys":e.thisOpenKeys},scopedSlots:e._u([{key:"content",fn:function(){return[a("a-row",{style:{paddingTop:"10px"}},[a("a-col",{attrs:{span:8,offset:1}},[a("h2",[e._v("个人资料")])])],1),a("a-divider"),a("a-row",{attrs:{align:"top"}},[a("a-col",{attrs:{span:3,offset:3}},[a("a-avatar",{attrs:{src:"/api/user/avatar/get",size:64}})],1),a("a-col",{attrs:{span:9}},[a("a-row",[a("a-col",{style:{marginBottom:"10px"},attrs:{span:9}},[e._v(" 用户名: "+e._s(e.form.username)+" ")])],1),a("a-row",[a("keep-alive",[a("a-col",{attrs:{span:24}},[e._v(" 个人简介: "),a("div",{style:{lineHeight:"40px"}},[e.flag?a("div",[null==e.form.description||""==e.form.description.trim()?a("div",[e._v(" 这个人太懒了，什么也没有留下 ")]):a("div",[e._v(" "+e._s(e.form.description)+" ")])]):a("a-input",{attrs:{type:"text"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}},[e._v(e._s(e.form.description))])],1)])],1)],1)],1)],1),a("a-row",{style:{marginTop:"10px"}},[a("a-col",{attrs:{span:3,offset:3}},[a("a",{attrs:{href:"javascript:void(0);"},on:{click:e.uploadAvatar}},[e._v("修改头像")])])],1),a("a-modal",{attrs:{title:"点击上传你的头像   ",centered:"",bodyStyle:{height:"200px"},width:400},on:{ok:e.handleOk,cancel:e.handleCancel},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("a-row",[a("a-col",{attrs:{span:12,offset:"6"}},[a("a-upload",{attrs:{name:"file",action:"/api/user/avatar/upload"},on:{change:e.handleChange}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),e._v(" Click to Upload ")],1)],1)],1)],1)],1),a("a-divider"),a("a-form-model",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[a("a-form-item",{attrs:{label:"学院"}},[a("keep-alive",[e.flag?a("div",[e._v(e._s(e.form.academy))]):a("a-select",{model:{value:e.form.academy,callback:function(t){e.$set(e.form,"academy",t)},expression:"form.academy"}},e._l(e.academySource,(function(t,s){return a("a-select-option",{key:s,attrs:{value:t}},[e._v(e._s(t))])})),1)],1)],1),a("a-form-item",{attrs:{label:"性别"}},[e.flag?a("div",[e._v(e._s(e.form.gender))]):a("a-radio-group",{model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[a("a-radio",{attrs:{value:"男"}},[e._v("男")]),a("a-radio",{attrs:{value:"女"}},[e._v("女")])],1)],1),a("a-form-item",{attrs:{label:"年纪"}},[a("keep-alive",[e.flag?a("div",[e._v(" "+e._s(e.form.age)+" ")]):a("a-input-number",{model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",t)},expression:"form.age"}})],1)],1),a("a-form-item",{attrs:{label:"年级"}},[a("keep-alive",[e.flag?a("div",[e._v(e._s(e.form.grade))]):a("a-select",{model:{value:e.form.grade,callback:function(t){e.$set(e.form,"grade",t)},expression:"form.grade"}},[a("a-select-option",{key:"1",attrs:{value:"大一"}},[e._v("大一")]),a("a-select-option",{key:"2",attrs:{value:"大二"}},[e._v("大二")]),a("a-select-option",{key:"3",attrs:{value:"大三"}},[e._v("大三")]),a("a-select-option",{key:"4",attrs:{value:"大四"}},[e._v("大四")]),a("a-select-option",{key:"5",attrs:{value:"其他"}},[e._v("其他")])],1)],1)],1),a("a-form-item",{attrs:{label:"邮箱"}},[e.flag?a("div",[e._v(e._s(e.form.email))]):a("a-input",{attrs:{type:"email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),a("a-row",{style:{paddingBottom:"20px"}},[a("a-col",{attrs:{span:20,offset:3}},[e.flag?a("a-button",{attrs:{type:"primary"},on:{click:e.modify}},[e._v(" 修改 ")]):a("div",[a("a-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v(" 保存 ")]),a("a-button",{style:{marginLeft:"30px"},attrs:{type:"primary"},on:{click:e.cancel}},[e._v(" 取消 ")])],1)],1)],1)]},proxy:!0}])})},o=[],n=(a("d3b7"),a("abff")),r=a("4328"),l=a.n(r),i=["学院","性别","年龄","年级","邮箱"],c=["电院","农生","材料","生医工","安泰","人文"],u={name:"UserInfo",components:{Profile:n["a"]},data:function(){return{thisOpenKeys:["sub1"],thisSelectedKeys:["1"],flag:!0,data:i,academySource:c,form:{username:"",academy:"",gender:"",age:"",grade:"",email:"",description:"",avatar:""},labelCol:{span:4},wrapperCol:{span:8},visible:!1}},mounted:function(){this.getData()},methods:{getData:function(){var e=this;return new Promise((function(t,a){e.$axios.post("/api/user/info").then((function(a){e.form=a.data,t(a),console.log(a.data)})).catch((function(e){a(e)}))}))},uploadAvatar:function(){console.log("upload a new avatar"),this.visible=!0},modify:function(){this.flag=!1},save:function(){var e=this;this.flag=!0,console.log(this.form),this.$axios.post("/api/user/updateUserInfo",l.a.stringify(this.form)).then((function(t){200===t.data.status?e.$message.success(t.data.message):e.$message.error(t.data.message)}))},cancel:function(){var e=this;this.getData().then((function(){e.flag=!0}))},handleOk:function(){console.log("ok"),this.$message.success("头像修改成功",1),this.visible=!1},handleCancel:function(){console.log("cancel")},handleChange:function(e){e.file.status,"done"===e.file.status?(window.location.reload(),this.$message.success("头像上传成功"),this.visible=!1):"error"===e.file.status&&this.$message.error("头像上传失败")}}},f=u,p=a("2877"),d=Object(p["a"])(f,s,o,!1,null,null,null);t["default"]=d.exports}}]);